<?php
// http://chevroletinalco.cl/wp-content/uploads/new-cars/485a5665-b81c-3863-d33c-5266eca822b1/aveo_sedan_fb.jpg

function ns_models_selector_shortcode( $atts ) {
ob_start();
?>
<div class="selector">
	<div class="auto">
		<div class="foto"><img src="/wp-content/themes/nskameleon/images/cruze.jpg" alt="Modelo y versi&oacute;n" title="Modelo y versi&oacute;n" /></div>
		<div class="texto"><b>Chevrolet Cruze</b>Sedán 1.8 MT LS<span>Desde <b>$8.590.000</b></span></div>
		<div class="switcher">
			<div class="onoffswitch">
				<input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" >
				<label class="onoffswitch-label" for="myonoffswitch"> <span class="onoffswitch-inner"> <span class="onoffswitch-active"><span class="onoffswitch-switch"><img src="/wp-content/themes/nskameleon/images/ico-yess.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> <span class="onoffswitch-inactive"><span class="onoffswitch-switch"><img src="/wp-content/themes/nskameleon/images/ico-arrowright.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> </span> </label>
			</div>
		</div>
	</div>
	<div class="auto">
		<div class="foto"><img src="/landingpages/wp-content/themes/nskameleon/images/cruze.jpg" alt="Modelo y versi&oacute;n" title="Modelo y versi&oacute;n" /></div>
		<div class="texto"><b>Chevrolet Cruze</b>Sedán 1.8 MT LS<span>Desde <b>$8.590.000</b></span></div>
		<div class="switcher">
			<div class="onoffswitch">
				<input type="checkbox" name="onoffswitch2" class="onoffswitch-checkbox" id="myonoffswitch2" >
				<label class="onoffswitch-label" for="myonoffswitch2"> <span class="onoffswitch-inner"> <span class="onoffswitch-active"><span class="onoffswitch-switch"><img src="/landingpages/wp-content/themes/nskameleon/images/ico-yess.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> <span class="onoffswitch-inactive"><span class="onoffswitch-switch"><img src="/landingpages/wp-content/themes/nskameleon/images/ico-arrowright.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> </span> </label>
			</div>
		</div>
	</div>
	<div class="auto">
		<div class="foto"><img src="/landingpages/wp-content/themes/nskameleon/images/cruze.jpg" alt="Modelo y versi&oacute;n" title="Modelo y versi&oacute;n" /></div>
		<div class="texto"><b>Chevrolet Cruze</b>Sedán 1.8 MT LS<span>Desde <b>$8.590.000</b></span></div>
		<div class="switcher">
			<div class="onoffswitch">
				<input type="checkbox" name="onoffswitch3" class="onoffswitch-checkbox" id="myonoffswitch3" >
				<label class="onoffswitch-label" for="myonoffswitch3"> <span class="onoffswitch-inner"> <span class="onoffswitch-active"><span class="onoffswitch-switch"><img src="/landingpages/wp-content/themes/nskameleon/images/ico-yess.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> <span class="onoffswitch-inactive"><span class="onoffswitch-switch"><img src="/landingpages/wp-content/themes/nskameleon/images/ico-arrowright.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> </span> </label>
			</div>
		</div>
	</div>
	<div class="auto">
		<div class="foto"><img src="/landingpages/wp-content/themes/nskameleon/images/cruze.jpg" alt="Modelo y versi&oacute;n" title="Modelo y versi&oacute;n" /></div>
		<div class="texto"><b>Chevrolet Cruze</b>Sedán 1.8 MT LS<span>Desde <b>$8.590.000</b></span></div>
		<div class="switcher">
			<div class="onoffswitch">
				<input type="checkbox" name="onoffswitch4" class="onoffswitch-checkbox" id="myonoffswitch4" >
				<label class="onoffswitch-label" for="myonoffswitch4"> <span class="onoffswitch-inner"> <span class="onoffswitch-active"><span class="onoffswitch-switch"><img src="/landingpages/wp-content/themes/nskameleon/images/ico-yess.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> <span class="onoffswitch-inactive"><span class="onoffswitch-switch"><img src="/landingpages/wp-content/themes/nskameleon/images/ico-arrowright.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> </span> </label>
			</div>
		</div>
	</div>
	<div class="auto">
		<div class="foto"><img src="/landingpages/wp-content/themes/nskameleon/images/cruze.jpg" alt="Modelo y versi&oacute;n" title="Modelo y versi&oacute;n" /></div>
		<div class="texto"><b>Chevrolet Cruze</b>Sedán 1.8 MT LS<span>Desde <b>$8.590.000</b></span></div>
		<div class="switcher">
			<div class="onoffswitch">
				<input type="checkbox" name="onoffswitch5" class="onoffswitch-checkbox" id="myonoffswitch5" >
				<label class="onoffswitch-label" for="myonoffswitch5"> <span class="onoffswitch-inner"> <span class="onoffswitch-active"><span class="onoffswitch-switch"><img src="/landingpages/wp-content/themes/nskameleon/images/ico-yess.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> <span class="onoffswitch-inactive"><span class="onoffswitch-switch"><img src="/landingpages/wp-content/themes/nskameleon/images/ico-arrowright.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> </span> </label>
			</div>
		</div>
	</div>
	<div class="auto">
		<div class="foto"><img src="/landingpages/wp-content/themes/nskameleon/images/cruze.jpg" alt="Modelo y versi&oacute;n" title="Modelo y versi&oacute;n" /></div>
		<div class="texto"><b>Chevrolet Cruze</b>Sedán 1.8 MT LS<span>Desde <b>$8.590.000</b></span></div>
		<div class="switcher">
			<div class="onoffswitch">
				<input type="checkbox" name="onoffswitch6" class="onoffswitch-checkbox" id="myonoffswitch6" >
				<label class="onoffswitch-label" for="myonoffswitch6"> <span class="onoffswitch-inner"> <span class="onoffswitch-active"><span class="onoffswitch-switch"><img src="/landingpages/wp-content/themes/nskameleon/images/ico-yess.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> <span class="onoffswitch-inactive"><span class="onoffswitch-switch"><img src="/landingpages/wp-content/themes/nskameleon/images/ico-arrowright.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> </span> </label>
			</div>
		</div>
	</div>
	<div class="auto">
		<div class="foto"><img src="/landingpages/wp-content/themes/nskameleon/images/cruze.jpg" alt="Modelo y versi&oacute;n" title="Modelo y versi&oacute;n" /></div>
		<div class="texto"><b>Chevrolet Cruze</b>Sedán 1.8 MT LS<span>Desde <b>$8.590.000</b></span></div>
		<div class="switcher">
			<div class="onoffswitch">
				<input type="checkbox" name="onoffswitch7" class="onoffswitch-checkbox" id="myonoffswitch7" checked>
				<label class="onoffswitch-label" for="myonoffswitch7"> <span class="onoffswitch-inner"> <span class="onoffswitch-active"><span class="onoffswitch-switch"><img src="/landingpages/wp-content/themes/nskameleon/images/ico-yess.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> <span class="onoffswitch-inactive"><span class="onoffswitch-switch"><img src="/landingpages/wp-content/themes/nskameleon/images/ico-arrowright.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> </span> </label>
			</div>
		</div>
	</div>
	<div class="auto">
		<div class="foto"><img src="/landingpages/wp-content/themes/nskameleon/images/cruze.jpg" alt="Modelo y versi&oacute;n" title="Modelo y versi&oacute;n" /></div>
		<div class="texto"><b>Chevrolet Cruze</b>Sedán 1.8 MT LS<span>Desde <b>$8.590.000</b></span></div>
		<div class="switcher">
			<div class="onoffswitch">
				<input type="checkbox" name="onoffswitch8" class="onoffswitch-checkbox" id="myonoffswitch8" >
				<label class="onoffswitch-label" for="myonoffswitch8"> <span class="onoffswitch-inner"> <span class="onoffswitch-active"><span class="onoffswitch-switch"><img src="/landingpages/wp-content/themes/nskameleon/images/ico-yess.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> <span class="onoffswitch-inactive"><span class="onoffswitch-switch"><img src="/landingpages/wp-content/themes/nskameleon/images/ico-arrowright.png" alt="Inalco" title="Inalco" style="margin:8px 0 0 0" /></span></span> </span> </label>
			</div>
		</div>
	</div>
</div>
<?php
return ob_get_clean();
}
add_shortcode( 'models_selector', 'ns_models_selector_shortcode' );

register_vc_shortcode(array(

	"name" => __("NSK Modelos", 'nskameleon'),
	"base" => "models_selector",
	"class" => "",
	"category" => __('Content', 'nskameleon'),
	"params" => array(
		array(
			"type" => "checkbox",
			"holder" => "div",
			"class" => "",
			"heading" => __('Mostrar el precio?', 'nskameleon'),
			"param_name" => "price",
			"value" => array('Si' => 'si'),
			//"description" => __("Una sucursal por linea.", 'nskameleon')
		),
		array(
			"type" => "checkbox",
			"holder" => "div",
			"class" => "",
			"heading" => __('Mostrar el la foto?', 'nskameleon'),
			"param_name" => "photo",
			"value" => array('Si' => 'si'),
			//"description" => __("Una sucursal por linea.", 'nskameleon')
		),
		array(
			"type" => "ns_models",
			"holder" => "div",
			"class" => "",
			"heading" => __('Modelos', 'nskameleon'),
			"param_name" => "modelssss",
			//"value" => array('Si' => 'si'),
			//"description" => __("Una sucursal por linea.", 'nskameleon')
		)
	)
));

function ns_param_models_field($settings, $value) {
	
	$dependency = vc_generate_dependencies_attributes($settings);
	$models = get_models();
	
	$value = $value ? $value : '[]';
	$html = array();
	$html[] = '<input class="wpb_vc_param_value" type="text" name="' . $settings['param_name'] . '" id="models" value="'. base64_encode($value)  .'"/>';	
	$html[] = '<div class="edit_form_line"><input type="checkbox" name="all-models" id="all-models" value="1"/><b>Todos</b></div>';	

	foreach($models as $model){
		$html[] = '<div class="edit_form_line"><input type="checkbox" class="inalc-models" name="m-list[]" value="' . $model->term_id . '"/>' . $model->name . '</div>';	
	}
	return implode("\n", $html); 
}
add_shortcode_param('ns_models', 'ns_param_models_field', get_template_directory_uri().'/js/models-selector.js');
